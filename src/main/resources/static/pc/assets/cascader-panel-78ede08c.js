import{Q as pe,aO as ue,b_ as Ea,aX as $e,J as fe,cH as Xe,aV as Ye,b as wa,bG as ea,a7 as g,n as W,p as f,v as F,E as j,I as B,aW as ve,z as _,y as G,G as T,F as ce,x as re,bp as aa,r as S,C as me,D as $a,A as se,b0 as Sa,cI as _e,c7 as Oe,cB as Ta,aC as ta,aF as ge,cc as Va,cJ as Pa,aG as Ee,aK as we,bQ as La,f as qe,aS as ee,cK as Da,i as na,aZ as ne,bj as sa,cL as Ma,bz as O,cM as ye,cN as la,cE as Ia,aH as _a,bB as Fa,aM as xa,aN as za,aT as Ba,a_ as Ha,b$ as Aa,P as ke,aU as d,H as Ka,L as Oa,cO as qa,a as Ra,B as Ua,V as Wa,cw as Za,Z as Re,ba as ja,cP as Ga,cQ as Ja}from"./index-78223f15.js";import{E as oa}from"./scrollbar-afb507b1.js";import{E as Qa}from"./checkbox-9b81128d.js";import{E as Xa}from"./radio-4fcd33f8.js";import{g as Ya}from"./rand-14326ce1.js";import{c as Ue}from"./strings-4bc551b5.js";import{i as be}from"./isEqual-528f6bc1.js";import{u as We,c as Ze}from"./arrays-e667dc24.js";import{b as et}from"./flatten-011cba25.js";import{c as ia}from"./cloneDeep-2e723db0.js";import{u as at,E as je}from"./popper-7ac694e5.js";import{t as tt,E as Ge}from"./tag-c15f0a42.js";import{C as nt}from"./index-b0526b91.js";import{d as st}from"./debounce-429b1daa.js";var lt=1/0;function ot(e){var t=e==null?0:e.length;return t?et(e,lt):[]}var it=pe({name:"NodeContent",setup(){return{ns:ue("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:s}=this.$parent,{data:n,label:o}=t,{renderLabelFn:p}=s;return Ea("span",{class:e.e("label")},p?p({node:t,data:n}):o)}});const xe=Symbol(),rt=pe({name:"ElCascaderNode",components:{ElCheckbox:Qa,ElRadio:Xa,NodeContent:it,ElIcon:fe,Check:Xe,Loading:Ye,ArrowRight:wa},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const s=ea(xe),n=ue("cascader-node"),o=g(()=>s.isHoverMenu),p=g(()=>s.config.multiple),c=g(()=>s.config.checkStrictly),v=g(()=>{var k;return(k=s.checkedNodes[0])==null?void 0:k.uid}),u=g(()=>e.node.isDisabled),b=g(()=>e.node.isLeaf),N=g(()=>c.value&&!b.value||!u.value),P=g(()=>x(s.expandingNode)),I=g(()=>c.value&&s.checkedNodes.some(x)),x=k=>{var V;const{level:z,uid:ae}=e.node;return((V=k==null?void 0:k.pathNodes[z-1])==null?void 0:V.uid)===ae},H=()=>{P.value||s.expandNode(e.node)},J=k=>{const{node:V}=e;k!==V.checked&&s.handleCheckChange(V,k)},$=()=>{s.lazyLoad(e.node,()=>{b.value||H()})},q=k=>{o.value&&(L(),!b.value&&t("expand",k))},L=()=>{const{node:k}=e;!N.value||k.loading||(k.loaded?H():$())},Z=()=>{o.value&&!b.value||(b.value&&!u.value&&!c.value&&!p.value?R(!0):L())},A=k=>{c.value?(J(k),e.node.loaded&&H()):R(k)},R=k=>{e.node.loaded?(J(k),!c.value&&H()):$()};return{panel:s,isHoverMenu:o,multiple:p,checkStrictly:c,checkedNodeId:v,isDisabled:u,isLeaf:b,expandable:N,inExpandingPath:P,inCheckedPath:I,ns:n,handleHoverExpand:q,handleExpand:L,handleClick:Z,handleCheck:R,handleSelectCheck:A}}}),ct=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],ut=re("span",null,null,-1);function dt(e,t,s,n,o,p){const c=W("el-checkbox"),v=W("el-radio"),u=W("check"),b=W("el-icon"),N=W("node-content"),P=W("loading"),I=W("arrow-right");return f(),F("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:T([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(...x)=>e.handleHoverExpand&&e.handleHoverExpand(...x)),onFocus:t[3]||(t[3]=(...x)=>e.handleHoverExpand&&e.handleHoverExpand(...x)),onClick:t[4]||(t[4]=(...x)=>e.handleClick&&e.handleClick(...x))},[j(" prefix "),e.multiple?(f(),B(c,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=ve(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(f(),B(v,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=ve(()=>{},["stop"]))},{default:_(()=>[j(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ut]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(f(),B(b,{key:2,class:T(e.ns.e("prefix"))},{default:_(()=>[G(u)]),_:1},8,["class"])):j("v-if",!0),j(" content "),G(N),j(" postfix "),e.isLeaf?j("v-if",!0):(f(),F(ce,{key:3},[e.node.loading?(f(),B(b,{key:0,class:T([e.ns.is("loading"),e.ns.e("postfix")])},{default:_(()=>[G(P)]),_:1},8,["class"])):(f(),B(b,{key:1,class:T(["arrow-right",e.ns.e("postfix")])},{default:_(()=>[G(I)]),_:1},8,["class"]))],64))],42,ct)}var pt=$e(rt,[["render",dt],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const ht=pe({name:"ElCascaderMenu",components:{Loading:Ye,ElIcon:fe,ElScrollbar:oa,ElCascaderNode:pt},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Sa(),s=ue("cascader-menu"),{t:n}=aa(),o=Ya();let p=null,c=null;const v=ea(xe),u=S(null),b=g(()=>!e.nodes.length),N=g(()=>!v.initialLoaded),P=g(()=>`cascader-menu-${o}-${e.index}`),I=$=>{p=$.target},x=$=>{if(!(!v.isHoverMenu||!p||!u.value))if(p.contains($.target)){H();const q=t.vnode.el,{left:L}=q.getBoundingClientRect(),{offsetWidth:Z,offsetHeight:A}=q,R=$.clientX-L,k=p.offsetTop,V=k+p.offsetHeight;u.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${k} L${Z} 0 V${k} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${V} L${Z} ${A} V${V} Z" />
        `}else c||(c=window.setTimeout(J,v.config.hoverThreshold))},H=()=>{c&&(clearTimeout(c),c=null)},J=()=>{u.value&&(u.value.innerHTML="",H())};return{ns:s,panel:v,hoverZone:u,isEmpty:b,isLoading:N,menuId:P,t:n,handleExpand:I,handleMouseMove:x,clearHoverZone:J}}});function ft(e,t,s,n,o,p){const c=W("el-cascader-node"),v=W("loading"),u=W("el-icon"),b=W("el-scrollbar");return f(),B(b,{key:e.menuId,tag:"ul",role:"menu",class:T(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:_(()=>{var N;return[(f(!0),F(ce,null,me(e.nodes,P=>(f(),B(c,{key:P.uid,node:P,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(f(),F("div",{key:0,class:T(e.ns.e("empty-text"))},[G(u,{size:"14",class:T(e.ns.is("loading"))},{default:_(()=>[G(v)]),_:1},8,["class"]),$a(" "+se(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(f(),F("div",{key:1,class:T(e.ns.e("empty-text"))},se(e.t("el.cascader.noData")),3)):(N=e.panel)!=null&&N.isHoverMenu?(f(),F("svg",{key:2,ref:"hoverZone",class:T(e.ns.e("hover-zone"))},null,2)):j("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var vt=$e(ht,[["render",ft],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let mt=0;const gt=e=>{const t=[e];let{parent:s}=e;for(;s;)t.unshift(s),s=s.parent;return t};class de{constructor(t,s,n,o=!1){this.data=t,this.config=s,this.parent=n,this.root=o,this.uid=mt++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:c,children:v}=s,u=t[v],b=gt(this);this.level=o?0:n?n.level+1:1,this.value=t[p],this.label=t[c],this.pathNodes=b,this.pathValues=b.map(N=>N.value),this.pathLabels=b.map(N=>N.label),this.childrenData=u,this.children=(u||[]).map(N=>new de(N,s,this)),this.loaded=!s.lazy||this.isLeaf||!_e(u)}get isDisabled(){const{data:t,parent:s,config:n}=this,{disabled:o,checkStrictly:p}=n;return(Oe(o)?o(t,this):!!t[o])||!p&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:t,config:s,childrenData:n,loaded:o}=this,{lazy:p,leaf:c}=s,v=Oe(c)?c(t,this):t[c];return Ta(v)?p&&!o?!1:!(Array.isArray(n)&&n.length):!!v}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:s,children:n}=this,o=new de(t,this.config,this);return Array.isArray(s)?s.push(t):this.childrenData=[t],n.push(o),o}calcText(t,s){const n=t?this.pathLabels.join(s):this.label;return this.text=n,n}broadcast(t,...s){const n=`onParent${Ue(t)}`;this.children.forEach(o=>{o&&(o.broadcast(t,...s),o[n]&&o[n](...s))})}emit(t,...s){const{parent:n}=this,o=`onChild${Ue(t)}`;n&&(n[o]&&n[o](...s),n.emit(t,...s))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,s=t.filter(o=>!o.isDisabled),n=s.length?s.every(o=>o.checked):!1;this.setCheckState(n)}setCheckState(t){const s=this.children.length,n=this.children.reduce((o,p)=>{const c=p.checked?1:p.indeterminate?.5:0;return o+c},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&t,this.indeterminate=this.loaded&&n!==s&&n>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:s,multiple:n}=this.config;s||!n?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Fe=(e,t)=>e.reduce((s,n)=>(n.isLeaf?s.push(n):(!t&&s.push(n),s=s.concat(Fe(n.children,t))),s),[]);class Je{constructor(t,s){this.config=s;const n=(t||[]).map(o=>new de(o,this.config));this.nodes=n,this.allNodes=Fe(n,!1),this.leafNodes=Fe(n,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,s){const n=s?s.appendChild(t):new de(t,this.config);s||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(t,s){t.forEach(n=>this.appendNode(n,s))}getNodeByValue(t,s=!1){return!t&&t!==0?null:this.getFlattedNodes(s).find(o=>be(o.value,t)||be(o.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:n,level:o})=>be(t.value,n)&&t.level===o)||null}}const ra=ta({modelValue:{type:ge([Number,String,Array])},options:{type:ge(Array),default:()=>[]},props:{type:ge(Object),default:()=>({})}}),bt={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Va,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},kt=e=>g(()=>({...bt,...e.props})),Qe=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},yt=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():Pa(e)&&e.click()},Ct=(e,t)=>{const s=t.slice(0),n=s.map(p=>p.uid),o=e.reduce((p,c)=>{const v=n.indexOf(c.uid);return v>-1&&(p.push(c),s.splice(v,1),n.splice(v,1)),p},[]);return o.push(...s),o},Nt=pe({name:"ElCascaderPanel",components:{ElCascaderMenu:vt},props:{...ra,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ee,we,"close","expand-change"],setup(e,{emit:t,slots:s}){let n=!1;const o=ue("cascader"),p=kt(e);let c=null;const v=S(!0),u=S([]),b=S(null),N=S([]),P=S(null),I=S([]),x=g(()=>p.value.expandTrigger==="hover"),H=g(()=>e.renderLabel||s.default),J=()=>{const{options:r}=e,h=p.value;n=!1,c=new Je(r,h),N.value=[c.getNodes()],h.lazy&&_e(e.options)?(v.value=!1,$(void 0,m=>{m&&(c=new Je(m,h),N.value=[c.getNodes()]),v.value=!0,z(!1,!0)})):z(!1,!0)},$=(r,h)=>{const m=p.value;r=r||new de({},m,void 0,!0),r.loading=!0;const E=y=>{const w=r,D=w.root?null:w;y&&(c==null||c.appendNodes(y,D)),w.loading=!1,w.loaded=!0,w.childrenData=w.childrenData||[],h&&h(y)};m.lazyLoad(r,E)},q=(r,h)=>{var m;const{level:E}=r,y=N.value.slice(0,E);let w;r.isLeaf?w=r.pathNodes[E-2]:(w=r,y.push(r.children)),((m=P.value)==null?void 0:m.uid)!==(w==null?void 0:w.uid)&&(P.value=r,N.value=y,!h&&t("expand-change",(r==null?void 0:r.pathValues)||[]))},L=(r,h,m=!0)=>{const{checkStrictly:E,multiple:y}=p.value,w=I.value[0];n=!0,!y&&(w==null||w.doCheck(!1)),r.doCheck(h),V(),m&&!y&&!E&&t("close"),!m&&!y&&!E&&Z(r)},Z=r=>{r&&(r=r.parent,Z(r),r&&q(r))},A=r=>c==null?void 0:c.getFlattedNodes(r),R=r=>{var h;return(h=A(r))==null?void 0:h.filter(m=>m.checked!==!1)},k=()=>{I.value.forEach(r=>r.doCheck(!1)),V(),N.value=N.value.slice(0,1),P.value=null,t("expand-change",[])},V=()=>{var r;const{checkStrictly:h,multiple:m}=p.value,E=I.value,y=R(!h),w=Ct(E,y),D=w.map(M=>M.valueByOption);I.value=w,b.value=m?D:(r=D[0])!=null?r:null},z=(r=!1,h=!1)=>{const{modelValue:m}=e,{lazy:E,multiple:y,checkStrictly:w}=p.value,D=!w;if(!(!v.value||n||!h&&be(m,b.value)))if(E&&!r){const te=We(ot(Ze(m))).map(K=>c==null?void 0:c.getNodeByValue(K)).filter(K=>!!K&&!K.loaded&&!K.loading);te.length?te.forEach(K=>{$(K,()=>z(!1,h))}):z(!0,h)}else{const M=y?Ze(m):[m],te=We(M.map(K=>c==null?void 0:c.getNodeByValue(K,D)));ae(te,h),b.value=ia(m)}},ae=(r,h=!0)=>{const{checkStrictly:m}=p.value,E=I.value,y=r.filter(M=>!!M&&(m||M.isLeaf)),w=c==null?void 0:c.getSameNode(P.value),D=h&&w||y[0];D?D.pathNodes.forEach(M=>q(M,!0)):P.value=null,E.forEach(M=>M.doCheck(!1)),e.props.multiple?qe(y).forEach(M=>M.doCheck(!0)):y.forEach(M=>M.doCheck(!0)),I.value=y,ne(le)},le=()=>{sa&&u.value.forEach(r=>{const h=r==null?void 0:r.$el;if(h){const m=h.querySelector(`.${o.namespace.value}-scrollbar__wrap`),E=h.querySelector(`.${o.b("node")}.${o.is("active")}`)||h.querySelector(`.${o.b("node")}.in-active-path`);Ma(m,E)}})},oe=r=>{const h=r.target,{code:m}=r;switch(m){case O.up:case O.down:{r.preventDefault();const E=m===O.up?-1:1;ye(la(h,E,`.${o.b("node")}[tabindex="-1"]`));break}case O.left:{r.preventDefault();const E=u.value[Qe(h)-1],y=E==null?void 0:E.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);ye(y);break}case O.right:{r.preventDefault();const E=u.value[Qe(h)+1],y=E==null?void 0:E.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);ye(y);break}case O.enter:yt(h);break}};return La(xe,qe({config:p,expandingNode:P,checkedNodes:I,isHoverMenu:x,initialLoaded:v,renderLabelFn:H,lazyLoad:$,expandNode:q,handleCheckChange:L})),ee([p,()=>e.options],J,{deep:!0,immediate:!0}),ee(()=>e.modelValue,()=>{n=!1,z()},{deep:!0}),ee(()=>b.value,r=>{be(r,e.modelValue)||(t(Ee,r),t(we,r))}),Da(()=>u.value=[]),na(()=>!_e(e.modelValue)&&z()),{ns:o,menuList:u,menus:N,checkedNodes:I,handleKeyDown:oe,handleCheckChange:L,getFlattedNodes:A,getCheckedNodes:R,clearCheckedNodes:k,calculateCheckedValue:V,scrollToExpandingNode:le}}});function Et(e,t,s,n,o,p){const c=W("el-cascader-menu");return f(),F("div",{class:T([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...v)=>e.handleKeyDown&&e.handleKeyDown(...v))},[(f(!0),F(ce,null,me(e.menus,(v,u)=>(f(),B(c,{key:u,ref_for:!0,ref:b=>e.menuList[u]=b,index:u,nodes:[...v]},null,8,["index","nodes"]))),128))],34)}var Ce=$e(Nt,[["render",Et],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);Ce.install=e=>{e.component(Ce.name,Ce)};const wt=Ce,$t=ta({...ra,size:Ia,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ge(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ge(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:at.teleported,tagType:{...tt.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),St={[Ee]:e=>!!e||e===null,[we]:e=>!!e||e===null,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>_a(e),expandChange:e=>!!e,removeTag:e=>!!e},Tt={key:0},Vt=["placeholder","onKeydown"],Pt=["onClick"],Lt="ElCascader",Dt=pe({name:Lt}),Mt=pe({...Dt,props:$t,emits:St,setup(e,{expose:t,emit:s}){const n=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:l,placement:i}=a;["right","left","bottom","top"].includes(i)||(l.arrow.x=35)},requires:["arrow"]}]},p=Fa();let c=0,v=0;const u=ue("cascader"),b=ue("input"),{t:N}=aa(),{form:P,formItem:I}=xa(),x=S(null),H=S(null),J=S(null),$=S(null),q=S(null),L=S(!1),Z=S(!1),A=S(!1),R=S(!1),k=S(""),V=S(""),z=S([]),ae=S([]),le=S([]),oe=S(!1),r=g(()=>p.style),h=g(()=>n.disabled||(P==null?void 0:P.disabled)),m=g(()=>n.placeholder||N("el.cascader.placeholder")),E=g(()=>V.value||z.value.length>0||oe.value?"":m.value),y=za(),w=g(()=>["small"].includes(y.value)?"small":"default"),D=g(()=>!!n.props.multiple),M=g(()=>!n.filterable||D.value),te=g(()=>D.value?V.value:k.value),K=g(()=>{var a;return((a=$.value)==null?void 0:a.checkedNodes)||[]}),ca=g(()=>!n.clearable||h.value||A.value||!Z.value?!1:!!K.value.length),Se=g(()=>{const{showAllLevels:a,separator:l}=n,i=K.value;return i.length?D.value?"":i[0].calcText(a,l):""}),Te=g({get(){return ia(n.modelValue)},set(a){s(Ee,a),s(we,a),n.validateEvent&&(I==null||I.validate("change").catch(l=>Ba()))}}),ua=g(()=>[u.b(),u.m(y.value),u.is("disabled",h.value),p.class]),da=g(()=>[b.e("icon"),"icon-arrow-down",u.is("reverse",L.value)]),pa=g(()=>u.is("focus",L.value||R.value)),ze=g(()=>{var a,l;return(l=(a=x.value)==null?void 0:a.popperRef)==null?void 0:l.contentRef}),U=a=>{var l,i,C;h.value||(a=a??!L.value,a!==L.value&&(L.value=a,(i=(l=H.value)==null?void 0:l.input)==null||i.setAttribute("aria-expanded",`${a}`),a?(he(),ne((C=$.value)==null?void 0:C.scrollToExpandingNode)):n.filterable&&Me(),s("visibleChange",a)))},he=()=>{ne(()=>{var a;(a=x.value)==null||a.updatePopper()})},Ve=()=>{A.value=!1},Pe=a=>{const{showAllLevels:l,separator:i}=n;return{node:a,key:a.uid,text:a.calcText(l,i),hitState:!1,closable:!h.value&&!a.isDisabled,isCollapseTag:!1}},Le=a=>{var l;const i=a.node;i.doCheck(!1),(l=$.value)==null||l.calculateCheckedValue(),s("removeTag",i.valueByOption)},ha=()=>{if(!D.value)return;const a=K.value,l=[],i=[];if(a.forEach(C=>i.push(Pe(C))),ae.value=i,a.length){a.slice(0,n.maxCollapseTags).forEach(Q=>l.push(Pe(Q)));const C=a.slice(n.maxCollapseTags),X=C.length;X&&(n.collapseTags?l.push({key:-1,text:`+ ${X}`,closable:!1,isCollapseTag:!0}):C.forEach(Q=>l.push(Pe(Q))))}z.value=l},Be=()=>{var a,l;const{filterMethod:i,showAllLevels:C,separator:X}=n,Q=(l=(a=$.value)==null?void 0:a.getFlattedNodes(!n.props.checkStrictly))==null?void 0:l.filter(Y=>Y.isDisabled?!1:(Y.calcText(C,X),i(Y,te.value)));D.value&&(z.value.forEach(Y=>{Y.hitState=!1}),ae.value.forEach(Y=>{Y.hitState=!1})),A.value=!0,le.value=Q,he()},fa=()=>{var a;let l;A.value&&q.value?l=q.value.$el.querySelector(`.${u.e("suggestion-item")}`):l=(a=$.value)==null?void 0:a.$el.querySelector(`.${u.b("node")}[tabindex="-1"]`),l&&(l.focus(),!A.value&&l.click())},De=()=>{var a,l;const i=(a=H.value)==null?void 0:a.input,C=J.value,X=(l=q.value)==null?void 0:l.$el;if(!(!sa||!i)){if(X){const Q=X.querySelector(`.${u.e("suggestion-list")}`);Q.style.minWidth=`${i.offsetWidth}px`}if(C){const{offsetHeight:Q}=C,Y=z.value.length>0?`${Math.max(Q+6,c)}px`:`${c}px`;i.style.height=Y,he()}}},va=a=>{var l;return(l=$.value)==null?void 0:l.getCheckedNodes(a)},ma=a=>{he(),s("expandChange",a)},ie=a=>{var l;const i=(l=a.target)==null?void 0:l.value;if(a.type==="compositionend")oe.value=!1,ne(()=>Ie(i));else{const C=i[i.length-1]||"";oe.value=!Ga(C)}},ga=a=>{if(!oe.value)switch(a.code){case O.enter:U();break;case O.down:U(!0),ne(fa),a.preventDefault();break;case O.esc:L.value===!0&&(a.preventDefault(),a.stopPropagation(),U(!1));break;case O.tab:U(!1);break}},ba=()=>{var a;(a=$.value)==null||a.clearCheckedNodes(),!L.value&&n.filterable&&Me(),U(!1)},Me=()=>{const{value:a}=Se;k.value=a,V.value=a},ka=a=>{var l,i;const{checked:C}=a;D.value?(l=$.value)==null||l.handleCheckChange(a,!C,!1):(!C&&((i=$.value)==null||i.handleCheckChange(a,!0,!1)),U(!1))},ya=a=>{const l=a.target,{code:i}=a;switch(i){case O.up:case O.down:{const C=i===O.up?-1:1;ye(la(l,C,`.${u.e("suggestion-item")}[tabindex="-1"]`));break}case O.enter:l.click();break}},Ca=()=>{const a=z.value,l=a[a.length-1];v=V.value?0:v+1,!(!l||!v||n.collapseTags&&a.length>1)&&(l.hitState?Le(l):l.hitState=!0)},He=a=>{const l=a.target,i=u.e("search-input");l.className===i&&(R.value=!0),s("focus",a)},Ae=a=>{R.value=!1,s("blur",a)},Na=st(()=>{const{value:a}=te;if(!a)return;const l=n.beforeFilter(a);Ha(l)?l.then(Be).catch(()=>{}):l!==!1?Be():Ve()},n.debounce),Ie=(a,l)=>{!L.value&&U(!0),!(l!=null&&l.isComposing)&&(a?Na():Ve())},Ke=a=>Number.parseFloat(Ja(b.cssVarName("input-height"),a).value)-2;return ee(A,he),ee([K,h],ha),ee(z,()=>{ne(()=>De())}),ee(y,async()=>{await ne();const a=H.value.input;c=Ke(a)||c,De()}),ee(Se,Me,{immediate:!0}),na(()=>{const a=H.value.input,l=Ke(a);c=a.offsetHeight||l,Aa(a,De)}),t({getCheckedNodes:va,cascaderPanelRef:$,togglePopperVisible:U,contentRef:ze}),(a,l)=>(f(),B(d(je),{ref_key:"tooltipRef",ref:x,visible:L.value,teleported:a.teleported,"popper-class":[d(u).e("dropdown"),a.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${d(u).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Ve},{default:_(()=>[ke((f(),F("div",{class:T(d(ua)),style:Ka(d(r)),onClick:l[5]||(l[5]=()=>U(d(M)?void 0:!0)),onKeydown:ga,onMouseenter:l[6]||(l[6]=i=>Z.value=!0),onMouseleave:l[7]||(l[7]=i=>Z.value=!1)},[G(d(Oa),{ref_key:"input",ref:H,modelValue:k.value,"onUpdate:modelValue":l[1]||(l[1]=i=>k.value=i),placeholder:d(E),readonly:d(M),disabled:d(h),"validate-event":!1,size:d(y),class:T(d(pa)),tabindex:d(D)&&a.filterable&&!d(h)?-1:void 0,onCompositionstart:ie,onCompositionupdate:ie,onCompositionend:ie,onFocus:He,onBlur:Ae,onInput:Ie},{suffix:_(()=>[d(ca)?(f(),B(d(fe),{key:"clear",class:T([d(b).e("icon"),"icon-circle-close"]),onClick:ve(ba,["stop"])},{default:_(()=>[G(d(qa))]),_:1},8,["class","onClick"])):(f(),B(d(fe),{key:"arrow-down",class:T(d(da)),onClick:l[0]||(l[0]=ve(i=>U(),["stop"]))},{default:_(()=>[G(d(Ra))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),d(D)?(f(),F("div",{key:0,ref_key:"tagWrapper",ref:J,class:T(d(u).e("tags"))},[(f(!0),F(ce,null,me(z.value,i=>(f(),B(d(Ge),{key:i.key,type:a.tagType,size:d(w),hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:C=>Le(i)},{default:_(()=>[i.isCollapseTag===!1?(f(),F("span",Tt,se(i.text),1)):(f(),B(d(je),{key:1,disabled:L.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:_(()=>[re("span",null,se(i.text),1)]),content:_(()=>[re("div",{class:T(d(u).e("collapse-tags"))},[(f(!0),F(ce,null,me(ae.value.slice(a.maxCollapseTags),(C,X)=>(f(),F("div",{key:X,class:T(d(u).e("collapse-tag"))},[(f(),B(d(Ge),{key:C.key,class:"in-tooltip",type:a.tagType,size:d(w),hit:C.hitState,closable:C.closable,"disable-transitions":"",onClose:Q=>Le(C)},{default:_(()=>[re("span",null,se(C.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),a.filterable&&!d(h)?ke((f(),F("input",{key:0,"onUpdate:modelValue":l[2]||(l[2]=i=>V.value=i),type:"text",class:T(d(u).e("search-input")),placeholder:d(Se)?"":d(m),onInput:l[3]||(l[3]=i=>Ie(V.value,i)),onClick:l[4]||(l[4]=ve(i=>U(!0),["stop"])),onKeydown:Ua(Ca,["delete"]),onCompositionstart:ie,onCompositionupdate:ie,onCompositionend:ie,onFocus:He,onBlur:Ae},null,42,Vt)),[[Wa,V.value]]):j("v-if",!0)],2)):j("v-if",!0)],38)),[[d(nt),()=>U(!1),d(ze)]])]),content:_(()=>[ke(G(d(wt),{ref_key:"cascaderPanelRef",ref:$,modelValue:d(Te),"onUpdate:modelValue":l[8]||(l[8]=i=>Za(Te)?Te.value=i:null),options:a.options,props:n.props,border:!1,"render-label":a.$slots.default,onExpandChange:ma,onClose:l[9]||(l[9]=i=>a.$nextTick(()=>U(!1)))},null,8,["modelValue","options","props","render-label"]),[[Re,!A.value]]),a.filterable?ke((f(),B(d(oa),{key:0,ref_key:"suggestionPanel",ref:q,tag:"ul",class:T(d(u).e("suggestion-panel")),"view-class":d(u).e("suggestion-list"),onKeydown:ya},{default:_(()=>[le.value.length?(f(!0),F(ce,{key:0},me(le.value,i=>(f(),F("li",{key:i.uid,class:T([d(u).e("suggestion-item"),d(u).is("checked",i.checked)]),tabindex:-1,onClick:C=>ka(i)},[re("span",null,se(i.text),1),i.checked?(f(),B(d(fe),{key:0},{default:_(()=>[G(d(Xe))]),_:1})):j("v-if",!0)],10,Pt))),128)):ja(a.$slots,"empty",{key:1},()=>[re("li",{class:T(d(u).e("empty-text"))},se(d(N)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Re,A.value]]):j("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Ne=$e(Mt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);Ne.install=e=>{e.component(Ne.name,Ne)};const It=Ne,jt=It;export{jt as E};
