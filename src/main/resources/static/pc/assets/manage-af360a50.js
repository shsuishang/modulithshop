import{Q as V,a5 as L,u as j,e as q,f as k,$ as d,i as U,t as z,U as v,n as N,p as n,v as c,x as e,A as a,D as b,y as _,z as p,F as h,C,E as w,G as F,I as B,W as R,X as M,L as O}from"./index-78223f15.js";import{E as P,a as T}from"./form-item-8b9adddb.js";import{_ as G}from"./Img-372f434f.js";/* empty css              */import{E as J}from"./image-viewer-32b8c113.js";import{C as Q}from"./index-97ee7e1c.js";import{o as W,s as X}from"./order-2615b0b0.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import"./castArray-c12d26ef.js";import"./_baseClone-95bc8770.js";import"./_Uint8Array-e95ddee1.js";import"./_initCloneObject-cfd68362.js";import"./overlay-46bc55b6.js";import"./refs-eab7d2f3.js";import"./isUndefined-aa0326a0.js";import"./progress-bb109638.js";import"./cloneDeep-2e723db0.js";import"./isEqual-528f6bc1.js";/* empty css             */import"./index-f7dfb3b1.js";import"./debounce-429b1daa.js";const K=V({components:{Plus:L},setup(){const t=j(),g=q();let o=k({cat:[],isData:!1,CommentInfo:[],item_row:{},order_item_row:{},CommentData:{},autosize:"",star:null,commentPictures:[],actionUrl:"",starList:[{class:"star star1",activi:1,title:d("非常不满意")},{class:"star star2",activi:2,title:d("不满意")},{class:"star star3",activi:3,title:d("一般")},{class:"star star4",activi:4,title:d("满意")},{class:"star star5",activi:5,title:d("非常满意")}]}),m=k({store_desccredit:0,store_servicecredit:0,store_deliverycredit:0,order_id:g.query.order_id||""});o.actionUrl=Q.URL.upload,k({});const A=k({comment_content:[{required:!0,message:d("请输入评价内容……"),trigger:"blur"}]});g.query;let S=()=>{W({order_id:m.order_id}).then(i=>{if(i.status==200){o.CommentInfo=i.data.items;for(var s in o.CommentInfo)o.CommentInfo[s].comment_image=o.CommentInfo[s].comment_image||[],o.CommentInfo[s].comment_scores=o.CommentInfo[s].comment_scores||0,o.CommentInfo[s].scores=0,o.CommentInfo[s].comment_content=o.CommentInfo[s].comment_content||"",o.CommentInfo[s].comment="";i.data.order_evaluation&&i.data.order_evaluation.comment_store_desc_credit&&(o.CommentData=i.data.order_evaluation,m.store_desccredit=i.data.order_evaluation.comment_store_desc_credit,m.store_servicecredit=i.data.order_evaluation.comment_store_service_credit,m.store_deliverycredit=i.data.order_evaluation.comment_store_delivery_credit,o.isData=!0)}})};const y=(i,s)=>{o.CommentInfo[s].comment_image=i};let I=()=>{var i=m;if(!i.store_desccredit){v.error(d("亲~请针对我们的描述给一个评分!"));return}if(!i.store_servicecredit){v.error(d("亲~请针对我们的服务给一个评分!"));return}if(!i.store_deliverycredit){v.error(d("亲~请针对我们的物流给一个评分!"));return}for(var s in o.CommentInfo){if(!o.CommentInfo[s].comment_scores){v.error(d("请对您购买的商品进行评分!"));return}o.CommentInfo[s].comment=o.CommentInfo[s].comment_content}i.user_id=o.CommentInfo[0].buyer_id,i.store_id=o.CommentInfo[0].store_id,i.item=JSON.stringify(o.CommentInfo),X(i).then(r=>{if(r.status==200)v.success(d("保存成功!")),t.back(-1);else{v.error(r.msg);return}})};const f=(i,s)=>{o.isData||(o.CommentInfo[i].comment_scores=s,o.CommentInfo[i].scores=s)},$=(i,s)=>{if(!o.isData)switch(i){case"store_desccredit":m.store_desccredit=s;break;case"store_servicecredit":m.store_servicecredit=s;break;case"store_deliverycredit":m.store_deliverycredit=s;break}},E=i=>{I()};return U(()=>{S()}),{rules:A,ruleForm:m,imgChang:y,setItemsScores:f,setStoreStar:$,submitForm:E,...z(o)}}});const u=t=>(R("data-v-c67346e4"),t=t(),M(),t),Y={id:"page-container",style:{"background-color":"#f5f5f5"}},Z={class:"uc-content hide"},x={class:"container columns"},ee={class:"breadcrumb clearfix"},te=["title"],se=u(()=>e("span",{class:"navigation-pipe"}," ",-1)),oe={class:"navigation_page"},ie={class:"container mycomment-detail"},ae={class:"detail-hd",id:"o-info-orderinfo",payid:"4",ot:"0",shipmentid:"70",venderid:"32+ro+cdrp0=",iscarshoporder:"",isdaojiaorder:"false",stid:"0"},re={class:"orderinfo"},ne={class:"o-info hide"},ce={class:"mr20"},le={class:"mycomment-form"},de={class:"form-part1"},me={id:"activityVoucher",style:{},class:"f-item f-service"},_e={class:"fi-info"},ue={class:"comment-service"},pe=u(()=>e("div",{class:"s-img"},[e("a",{href:"javascript:void(0)"},[e("img",{src:"",alt:""})])],-1)),fe={class:"s-main"},ve={class:"s-name s-name-delivery"},he=u(()=>e("b",{class:"bean"},null,-1)),Ce={class:"fi-operate z-tip-warn"},ge={class:"fop-item fop-star z-tip-warn"},ye={class:"commstar-group commstar-group-hasweaklabel"},Ie={class:"item"},ke={class:"label"},be={class:"commstar"},Fe=["onClick","title"],$e=u(()=>e("i",{class:"face"},null,-1)),Ee=[$e],De={class:"star-info"},we={class:"item","data-question":"1828","data-key":"ro1828",haslabels:"true"},Ae={class:"label"},Se={class:"commstar"},Be=["onClick","title"],Ve=u(()=>e("i",{class:"face"},null,-1)),Le=[Ve],je={class:"star-info"},qe={class:"item"},Ue={class:"label"},ze={class:"commstar"},Ne=["onClick","title"],Re=u(()=>e("i",{class:"face"},null,-1)),Me=[Re],Oe={class:"star-info"},Pe=u(()=>e("div",{class:"fop-tip"},[e("i",{class:"tip-icon"}),e("em",{class:"tip-text"})],-1)),Te=u(()=>e("div",{class:"ueInstallTag"},null,-1)),Ge=u(()=>e("div",{class:"f-cutline"},null,-1)),Je={class:"fi-info"},Qe={class:"comment-goods"},We={class:"p-img"},Xe={class:"p-name"},He={class:"p-price"},Ke={class:"fi-operate"},Ye={class:"fop-main"},Ze={class:"commstar",style:{"margin-top":"10px"}},xe=["onClick","title"],et=u(()=>e("i",{class:"face"},null,-1)),tt=[et],st={class:"star-info"},ot={key:0,class:"f-btnbox"};function it(t,g,o,m,A,S){const y=N("router-link"),I=J,f=P,$=O,E=G,i=T;return n(),c("div",Y,[e("div",Z,[e("div",x,[e("div",ee,[e("a",{class:"home",href:"https://test.shopsuite.cn/Index/index","data-pjax":"#page-container",title:t.$t("返回首页")},a(t.$t("首页")),9,te),se,e("span",oe,a(t.$t("评价订单")),1)])])]),e("div",ie,[e("div",ae,[e("div",re,[e("div",ne,[e("span",ce,[b(a(t.$t("订单号：")),1),_(y,{to:{path:"/user/order/detail",query:{order_id:t.ruleForm.order_id}},class:"gray1"},{default:p(()=>[b(a(t.ruleForm.order_id),1)]),_:1},8,["to"])])])])]),e("div",le,[e("div",de,[e("div",me,[e("div",_e,[e("div",ue,[pe,e("div",fe,[e("div",ve,[b(a(t.$t("物流服务评价"))+" ",1),he])])])]),e("div",Ce,[e("div",ge,[e("div",ye,[e("div",Ie,[e("span",ke,a(t.$t("描述服务")),1),e("span",be,[(n(!0),c(h,null,C(t.starList,(s,r)=>(n(),c("span",{key:r,onClick:l=>t.setStoreStar("store_desccredit",s.activi),title:s.title,class:F([s.class,t.ruleForm.store_desccredit==s.activi?"active":""])},Ee,10,Fe))),128)),e("span",De,a(t.ruleForm.store_desccredit)+a(t.$t("分")),1)])]),e("div",we,[e("span",Ae,a(t.$t("服务态度")),1),e("span",Se,[(n(!0),c(h,null,C(t.starList,(s,r)=>(n(),c("span",{key:r,onClick:l=>t.setStoreStar("store_servicecredit",s.activi),title:s.title,class:F([s.class,t.ruleForm.store_servicecredit==s.activi?"active":""])},Le,10,Be))),128)),e("span",je,a(t.ruleForm.store_servicecredit)+a(t.$t("分")),1)])]),e("div",qe,[e("span",Ue,a(t.$t("发货速度")),1),e("span",ze,[(n(!0),c(h,null,C(t.starList,(s,r)=>(n(),c("span",{key:r,onClick:l=>t.setStoreStar("store_deliverycredit",s.activi),title:s.title,class:F([s.class,t.ruleForm.store_deliverycredit==s.activi?"active":""])},Me,10,Ne))),128)),e("span",Oe,a(t.ruleForm.store_deliverycredit)+a(t.$t("分")),1)])])]),Pe])])]),Te,Ge,(n(!0),c(h,null,C(t.CommentInfo,(s,r)=>(n(),c("div",{key:r,class:"f-item f-goods product-100018143954",voucherstatus:"0"},[e("div",Je,[e("div",Qe,[e("div",We,[_(y,{clstag:"pageclick|keycount|fabupingjia_201608055|2",to:{path:"/product/detail",query:{item_id:s.item_id}}},{default:p(()=>[_(I,{src:s.order_item_image,alt:""},null,8,["src"])]),_:2},1032,["to"])]),e("div",Xe,[_(y,{clstag:"pageclick|keycount|fabupingjia_201608055|3",to:{path:"/product/detail",query:{item_id:s.item_id}}},{default:p(()=>[b(a(s.item_name),1)]),_:2},1032,["to"])]),e("div",He,[e("strong",null,a(t.$t("¥"))+a(s.order_item_amount),1)])])]),e("div",Ke,[_(i,null,{default:p(()=>[_(f,{label:t.$t("商品评分")},{default:p(()=>[e("div",Ye,[e("span",Ze,[(n(!0),c(h,null,C(t.starList,(l,D)=>(n(),c("span",{key:D,onClick:at=>t.setItemsScores(r,l.activi),title:l.title,class:F([l.class,s.comment_scores==l.activi?"active":""])},tt,10,xe))),128)),e("span",st,a(s.comment_scores)+"分",1)])])]),_:2},1032,["label"]),_(f,{label:t.$t("评价晒单")},{default:p(()=>[_($,{onInput:t.inputOpinion,placeholder:t.$t("分享体验心得，给万千想买的人一个参考~"),rows:5,maxlength:"500","show-word-limit":"",type:"textarea",modelValue:t.CommentInfo[r].comment_content,"onUpdate:modelValue":l=>t.CommentInfo[r].comment_content=l,disabled:t.isData},null,8,["onInput","placeholder","modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label"]),t.isData?(n(),B(f,{key:0,"label-width":"80px"},{default:p(()=>[(n(!0),c(h,null,C(t.CommentInfo[r].comment_image,(l,D)=>(n(),c("div",{key:D},[_(I,{src:l,fit:"cover",class:"comment-user-img","preview-src-list":t.CommentInfo[r].comment_image},null,8,["src","preview-src-list"])]))),128))]),_:2},1024)):w("",!0),t.isData?w("",!0):(n(),B(f,{key:1,"label-width":"80px"},{default:p(()=>[_(E,{limit:"3",index:r,onChange:t.imgChang},null,8,["index","onChange"])]),_:2},1024))]),_:2},1024)])]))),128))]),t.isData?w("",!0):(n(),c("div",ot,[e("a",{href:"javascript: void(0);",clstag:"pageclick|keycount|fabupingjia_201608055|1",class:"btn-submit",onClick:g[0]||(g[0]=(...s)=>t.submitForm&&t.submitForm(...s))},a(t.$t("发表")),1)]))])])])}const Dt=H(K,[["render",it],["__scopeId","data-v-c67346e4"]]);export{Dt as default};
