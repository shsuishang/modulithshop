(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["member-member-setpassword"],{2118:function(t,e,i){var n=i("7f56");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("54a86f4c",n,!0,{sourceMap:!1,shadowMode:!1})},"2da2":function(t,e,i){"use strict";i.r(e);var n=i("6137"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"46c2":function(t,e,i){"use strict";i.r(e);var n=i("dd73"),a=i("2da2");for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("af74");var o=i("828b"),l=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"553cbbd1",null,!1,n["a"],void 0);e["default"]=l.exports},"51f4":function(t,e,i){"use strict";var n=i("beec"),a=i.n(n);a.a},6137:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("aa9c"),i("bf0f"),i("2797");n(i("c603"));var a=i("8f59"),s={computed:(0,a.mapState)(["Config","StateCode","notice","plantformInfo","shopInfo","userInfo","hasLogin"]),props:{show:{type:Boolean,default:!1},autoCountdown:{type:Boolean,default:!0},phone:{type:String,default:""},user_intl:{type:String,default:"+86"},len:{type:Number,default:6},bindType:{type:Number,default:1}},data:function(){return{codeAry:[{val:""},{val:""},{val:""},{val:""}],currItem:0,countdown:60,cTimer:null,callResult:{type:0,code:null},suspend:!1,pre_phone:""}},watch:{show:function(){this.show?this.suspend&&this.pre_phone==this.phone||this.init():(this.suspend||this.clearTimer(),this.clearCode())}},methods:{init:function(){var t=this,e=this.Config.URL.sendMobileVerifyCode;(t.pre_phone!=t.phone||null==t.cTimer&&t.show)&&(e=2==t.bindType?t.cf.URL.verify.email:this.Config.URL.sendMobileVerifyCode,t.$.request({url:e,data:{mobile:t.phone,email:t.phone},success:function(e,i,n,a){t.pre_phone=t.phone,200==i?uni.showToast({icon:"none",title:t.__("已发送重置验证码到注册手机，请注意查收。"),duration:3e3}):(uni.showToast({icon:"none",title:t.__("短信发送失败，请尝试。"),duration:3e3}),t.clearTimer())}}));for(var i=[],n=0;n<this.len;n++)i.push({val:""});this.codeAry=i,this.currItem=0,this.autoCountdown&&this.startTimer()},bindKeyEvent:function(t){var e=t.currentTarget.dataset.val;switch(e){case"clear":this.clearCode();break;case"delete":this.deleteCode();break;default:this.inputVal(e);break}},inputVal:function(t){this.currItem<this.len&&(this.codeAry[this.currItem].val=t,this.currItem++),this.currItem==this.len&&this.execuCall(1)},clearCode:function(){this.init()},deleteCode:function(){this.currItem>0&&(this.codeAry[this.currItem-1].val="",this.currItem--)},closeDialog:function(){this.execuCall(-1)},startTimer:function(){var t=this;null==t.cTimer&&(t.cTimer=setInterval((function(){t.countdown--,0==t.countdown&&t.clearTimer()}),1e3))},clearTimer:function(){clearInterval(this.cTimer),this.cTimer=null,this.countdown=60},getCodeValue:function(){var t="";return this.codeAry.forEach((function(e){t+=e.val})),t},execuCall:function(t){this.callResult.type=t,1==t?(this.callResult.code=this.getCodeValue(),this.clearTimer()):(this.suspend=!0,this.callResult.code=null),this.$emit("change",this.callResult)},resend:function(){var t=this;t.callResult.code=null,t.callResult.type=0,t.callResult.resendCall=function(){t.init()},t.$emit("change",t.callResult)}}};e.default=s},"7f56":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'.button-item[data-v-553cbbd1]:active{background:#d4d4d4}.button-item+.button-item[data-v-553cbbd1]{border-left:.1px solid #d4d4d4}.button-item[data-v-553cbbd1]{flex:1;padding:14px 0;text-align:center}.keyboard-line+.keyboard-line[data-v-553cbbd1]{border-top:.1px solid #d4d4d4}.keyboard-line[data-v-553cbbd1]{display:flex}.keyboard[data-v-553cbbd1]{background:#fff;position:absolute;z-index:999;width:100%;left:0;bottom:0;font-size:17px}.dialog-close[data-v-553cbbd1]{color:#999;height:20px;width:20px;font-size:15px;top:5px;left:5px;position:absolute}.dialog-close[data-v-553cbbd1]:before{content:"\\2716"}.countdown[data-v-553cbbd1]{color:#666;font-size:16px}.resend[data-v-553cbbd1]{color:#007aff;font-size:16px}.dialog-ft[data-v-553cbbd1]{margin-top:10px}.code-view[data-v-553cbbd1]{display:table;text-align:center;margin:0 auto;border-collapse:initial;border-spacing:10px 5px}.code-item+.code-item[data-v-553cbbd1]{margin-left:5px}.code-item[data-v-553cbbd1]{display:table-cell;border-bottom:1px solid #999;max-width:35px;min-width:35px;padding-bottom:2px;height:30px}.dialog-bd[data-v-553cbbd1]{margin-top:5px}.codedialog-subtitle[data-v-553cbbd1]{margin-top:5px;padding:5px 0;font-size:15px;line-height:1.4;word-wrap:break-word;word-break:break-all;color:#999}.dialog-view[data-v-553cbbd1]{position:fixed;z-index:999;width:70%;max-width:300px;top:50%;left:50%;-webkit-transform:translate(-50%,-120%);transform:translate(-50%,-120%);background-color:#fff;text-align:center;border-radius:3px;overflow:hidden;padding:20px 10px}.mask[data-v-553cbbd1]{position:fixed;z-index:999;top:0;right:0;left:0;bottom:0;background:rgba(0,0,0,.6)}\n\n\t/*\n\t.codedialog * {\n\t\tbox-sizing: border-box;\n\t}\n*/.codedialog[data-v-553cbbd1]{z-index:999;position:fixed;width:100%;height:100%;top:0;left:0;box-sizing:border-box}',""]),t.exports=e},"865d":function(t,e,i){"use strict";i.r(e);var n=i("8741"),a=i("8e63");for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("51f4");var o=i("828b"),l=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"01df065a",null,!1,n["a"],void 0);e["default"]=l.exports},8741:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={verifycodeDialog:i("46c2").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"m-cells m-cells-form"},[i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-hd"},[i("v-uni-label",{staticClass:"u-label"},[t._v(t._s(t.__("手机号码")))])],1),i("v-uni-view",{staticClass:"m-cell-bd",staticStyle:{display:"inherit"}},[t.userInfo.user_mobile&&t.Phone==t.userInfo.user_mobile?[i("v-uni-view",{staticStyle:{width:"400rpx",height:"48rpx"}},[t._v(t._s(t.user_intl)+t._s(t.Phone))])]:t.langSetComplete?[i("v-uni-picker",{staticStyle:{width:"80rpx","text-align":"center"},attrs:{mode:"selector",value:t.mode_index,range:t.langLists,"range-key":"name"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onIntlChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"country-int-code",staticStyle:{color:"#000000"}},[t._v(t._s(t.user_intl))])],1),i("v-uni-input",{staticClass:"u-input",staticStyle:{width:"400rpx",height:"48rpx"},attrs:{type:"number",placeholder:t.__("请输入手机号码"),maxlength:"11"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputphone.apply(void 0,arguments)}},model:{value:t.Phone,callback:function(e){t.Phone=e},expression:"Phone"}})]:t._e()],2),t.isPhone?t._e():i("v-uni-view",{staticClass:"m-cell-ft"},[i("v-uni-view",{staticClass:"m-icon-warn uni-icon uni-icon-info",attrs:{type:"warn"}})],1)],1),i("v-uni-view",{staticClass:"m-cell"},[i("v-uni-view",{staticClass:"m-cell-hd"},[i("v-uni-label",{staticClass:"u-label"},[t._v(t._s(t.__("登录密码")))])],1),i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-input",{staticClass:"u-input",attrs:{type:"text",placeholder:t.__("可在其它终端通过手机及密码登录")},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onInputPassword.apply(void 0,arguments)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t.isPassword?t._e():i("v-uni-view",{staticClass:"m-cell-ft"},[i("v-uni-view",{staticClass:"m-icon-warn uni-icon uni-icon-info",attrs:{type:"warn"}})],1)],1),i("v-uni-view",{staticClass:"m-cell m-cell-vcode"},[i("v-uni-view",{staticClass:"m-cell-hd"},[i("v-uni-label",{staticClass:"u-label"},[t._v(t._s(t.__("验证码")))])],1),i("v-uni-view",{staticClass:"m-cell-bd"},[i("v-uni-input",{staticClass:"u-input",attrs:{type:"number",placeholder:t.__("请输入验证码"),maxlength:"6"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputcode.apply(void 0,arguments)}}})],1),t.isCode?t._e():i("v-uni-view",{staticClass:"m-cell-ft"},[i("v-uni-view",{staticClass:"m-icon-warn uni-icon uni-icon-info",attrs:{type:"warn"}})],1),t.isSend?i("v-uni-view",{staticClass:"m-vcode-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendmessage.apply(void 0,arguments)}}},[t._v(t._s(t.btntext))]):i("v-uni-view",{staticClass:"m-vcode-btn"},[t._v(t._s(t.btntext))])],1)],1),i("v-uni-view",{staticClass:"btn_box"},[i("v-uni-button",{staticClass:"u-btn u-btn-default",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitdata.apply(void 0,arguments)}}},[t._v(t._s(t.__("保存")))])],1),t._e()],1)},s=[]},"87f8":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("aa9c");var a=n(i("2634")),s=n(i("2fdc")),o=n(i("9b1b")),l=i("8f59"),d=n(i("46c2")),c={name:"asset",data:function(){return{mode_index:0,user_intl:"",Phone:"",password:"",Code:"",btntext:this.__("发送"),isSend:!0,isPhone:!0,sendTime:120,isCode:!0,isPassword:!0,setDefaultLang:!1,langSetComplete:!1,showCodeDialog:!1,code:"1231",langLists:[]}},components:{verifycodeDialog:d.default},computed:(0,o.default)({},(0,l.mapState)(["Config","StateCode","notice","plantformInfo","shopInfo","userInfo","hasLogin"])),onLoad:function(t){var e=this;return(0,s.default)((0,a.default)().mark((function t(){var i;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$onLaunched;case 2:uni.setNavigationBarTitle({title:e.__("设置密码")}),i=e,e.userInfo.user_mobile||i.$.confirm("请先绑定手机!",(function(t){t.confirm&&i.$.navigateTo({url:"/member/member/bindphone"})})),e.userInfo.user_mobile||i.setData({setDefaultLang:!0}),i.initLang(),i.setData({user_intl:i.getUserIntl(i.userInfo.user_intl),Phone:i.userInfo.user_mobile});case 8:case"end":return t.stop()}}),t)})))()},onShow:function(){},methods:(0,o.default)((0,o.default)({},(0,l.mapMutations)(["login","logout","getPlantformInfo","forceUserInfo","getUserInfo"])),{},{initLang:function(){var t=[];for(var e in this.Lang.data.items)t.push({id:this.Lang.data.items[e].currency_id,name:this.Lang.data.items[e].label+"(+"+this.Lang.data.items[e].currency_id+")"}),console.info(this.Lang.data.items[e].currency_id,this.Lang.data.items[e].label),this.setDefaultLang&&e==this.mode_index&&(this.user_intl="+"+this.Lang.data.items[e].currency_id);this.setData({langLists:t,langSetComplete:!0})},getUserIntl:function(t){return t||"+"+this.langLists[this.mode_index].id},onIntlChange:function(t){var e=t.detail.value;this.setData({mode_index:t.detail.value,user_intl:"+"+this.langLists[e].id})},change:function(t){1==t.type?(this.code=t.code,this.showCodeDialog=!1):-1==t.type?(this.code=this.__("请输入验证码"),this.showCodeDialog=!1):setTimeout((function(){t.resendCall()}),3e3)},openCodeDialog:function(){this.showCodeDialog=!0},inputphone:function(t){this.setData({Phone:t.detail.value}),this.$.isNull(t.detail.value)?this.setData({isPhone:!1}):this.$.tel(t.detail.value,this.user_intl)?this.setData({isPhone:!0}):this.setData({isPhone:!1})},onInputPassword:function(t){},inputcode:function(t){this.setData({Code:t.detail.value}),this.$.isNull(t.detail.value)?this.setData({isCode:!1}):this.setData({isCode:!0})},sendmessage:function(){var t=this;if(t.$.isNull(this.Phone))this.setData({isPhone:!1});else if(t.$.tel(this.Phone,this.user_intl)){if(this.isSend){this.setData({isSend:!1});var e=this.sendTime,i={user_intl:t.user_intl,mobile:t.user_intl+this.Phone};t.$.request({url:this.Config.URL.sendMobileVerifyCode,data:i,success:function(i,n,a,s){if(200==n)var o=setInterval((function(){e>0?t.setData({btntext:e--+"s"}):(t.setData({isSend:!0,sendTime:120,btntext:t.__("重新发送")}),clearInterval(o))}),1e3);else t.setData({isSend:!0}),t.$.alert(a)}})}}else this.setData({isPhone:!1})},submitdata:function(){var t=this;if(t.$.isNull(this.Phone))this.setData({isPhone:!1});else if(t.$.tel(this.Phone,this.user_intl))if(t.$.isNull(this.Code))this.setData({isCode:!1});else if(t.$.isNull(this.password))this.setData({isPassword:!1});else{var e={mobile:t.user_intl+this.Phone,verify_key:t.user_intl+this.Phone,verify_code:this.Code,password:this.password,user_intl:t.user_intl,bind_type:1};t.$.request({url:this.Config.URL.setNewPassword,data:e,method:"POST",success:function(e,i,n,a){if(200==i){var s={};s["user_mobile"]=t.Phone,s["as"]=1,t.login(s),t.$.showModal(t.__("操作成功"),(function(){t.$.backpage(1)}))}else t.$.confirm(n)}})}else this.setData({isPhone:!1})}})};e.default=c},"8e63":function(t,e,i){"use strict";i.r(e);var n=i("87f8"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},af74:function(t,e,i){"use strict";var n=i("2118"),a=i.n(n);a.a},beec:function(t,e,i){var n=i("fd14");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("ea6c56a0",n,!0,{sourceMap:!1,shadowMode:!1})},dd73:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("v-uni-view",{staticClass:"codedialog"},[i("v-uni-view",{staticClass:"mask"}),i("v-uni-view",{staticClass:"dialog-view"},[i("v-uni-text",{staticClass:"dialog-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeDialog()}}}),i("v-uni-view",{staticClass:"dialog-hd"},[i("v-uni-view",{staticClass:"codedialog-maintitle"},[i("v-uni-text",[t._v(t._s(t.__("发送验证码")))])],1),""!=t.phone&&null!=t.phone&&1==t.bindType?i("v-uni-view",{staticClass:"codedialog-subtitle"},[i("v-uni-text",[t._v(t._s(t.sprintf(t.__("已发送到手机号：%s"),t.phone)))])],1):t._e(),""!=t.phone&&null!=t.phone&&2==t.bindType?i("v-uni-view",{staticClass:"codedialog-subtitle"},[i("v-uni-text",[t._v(t._s(t.sprintf(t.__("已发送到email：%s"),t.phone)))])],1):t._e()],1),i("v-uni-view",{staticClass:"dialog-bd"},[i("v-uni-view",{staticClass:"code-view"},t._l(t.codeAry,(function(e,n){return i("v-uni-view",{key:n,staticClass:"code-item"},[t._v(t._s(e.val))])})),1)],1),i("v-uni-view",{staticClass:"dialog-ft"},[60==t.countdown?i("v-uni-view",{staticClass:"resend",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resend.apply(void 0,arguments)}}},[t._v(t._s(t.__("重新发送")))]):t._e(),t.countdown<60?i("v-uni-view",{staticClass:"countdown"},[t._v(t._s(t.countdown)+"s")]):t._e()],1)],1),i("v-uni-view",{staticClass:"keyboard"},[i("v-uni-view",{staticClass:"keyboard-line"},[i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"1"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v("1")]),i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"2"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v("2")]),i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"3"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v("3")])],1),i("v-uni-view",{staticClass:"keyboard-line"},[i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"4"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v("4")]),i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"5"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v("5")]),i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"6"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v("6")])],1),i("v-uni-view",{staticClass:"keyboard-line"},[i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"7"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v("7")]),i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"8"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v("8")]),i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"9"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v("9")])],1),i("v-uni-view",{staticClass:"keyboard-line"},[i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"clear"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v(t._s(t.__("清空")))]),i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"0"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v("0")]),i("v-uni-view",{staticClass:"button-item",attrs:{"data-val":"delete"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindKeyEvent.apply(void 0,arguments)}}},[t._v("x")])],1)],1)],1):t._e()},a=[]},fd14:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */[data-v-01df065a]:export{theme_bg:#e93323}.m-cell-vcode[data-v-01df065a]{padding-top:0;padding-right:0;padding-bottom:0}.m-vcode-img[data-v-01df065a]{width:%?216?%;height:%?88?%}.btn_box[data-v-01df065a]{padding:%?20?%}.m-code[data-v-01df065a]{right:%?210?%}.m-vcode-btn[data-v-01df065a]{width:%?150?%;text-align:center}',""]),t.exports=e}}]);