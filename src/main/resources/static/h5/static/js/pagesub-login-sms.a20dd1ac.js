(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesub-login-sms"],{1833:function(e,t,i){"use strict";i.r(t);var n=i("7d5c"),o=i("7283");for(var a in o)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return o[e]}))}(a);i("fb20");var r=i("828b"),s=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"ece146f2",null,!1,n["a"],void 0);t["default"]=s.exports},"3da2":function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("5c47"),i("0506");var o=n(i("9b1b")),a=n(i("2634")),r=n(i("2fdc")),s=n(i("de2f")),c=n(i("626e")),l=n(i("8b0f")),u=i("8f59"),d={data:function(){return{logo:"",user_intl:"",user_mobile:"",user_avatar:"https://static.shopsuite.cn/demodata/assets/data/avatar.png",user_password:"",mobile_code:"",btntext:"发送",isUserMobile:!0,isUserEmail:!0,isNickname:!0,isPassword:!0,isSend:!0,sendTime:120,isCode:!0,isImgCode:!1,client_info:"{}",countdown:6,cTimer:null,isRotate:!1}},computed:(0,u.mapState)(["Config","StateCode","notice","plantformInfo","shopInfo","userInfo","hasLogin"]),components:{wInput:s.default,wButton:c.default,imgcode:l.default},onLoad:function(e){var t=this;return(0,r.default)((0,a.default)().mark((function i(){return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$onLaunched;case 2:uni.setNavigationBarTitle({title:t.__("手机验证码登录")}),t.setData({options:e}),t.btntext=t.__("发送"),setTimeout((function(){t.getPlantformInfo((function(e){t.logo=e.site_mobile_logo}))}),200),t.show();case 7:case"end":return i.stop()}}),i)})))()},methods:(0,o.default)((0,o.default)({},(0,u.mapMutations)(["login","logout","getPlantformInfo","forceUserInfo","getUserInfo"])),{},{intlChange:function(e){this.user_intl=e},refresh:function(){},show:function(){var e=this;setTimeout((function(){e.refresh()}),500)},onInputImgCode:function(e){e.detail.value.toLocaleLowerCase()==uni.getStorageSync("imgcode").toLocaleLowerCase()?this.setData({isImgCode:!0}):this.setData({isImgCode:!1})},inputuser_email:function(e){this.setData({user_email:e.detail.value}),this.$.isNull(e.detail.value)?this.setData({isUserEmail:!1}):/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(e.detail.value)?this.setData({isUserEmail:!0}):this.setData({isUserEmail:!1})},startReg:function(e){return!this.isRotate&&(this.$.tel(this.user_mobile,this.user_intl)?4!=this.mobile_code.length?(uni.showToast({icon:"none",position:"bottom",title:this.__("验证码不正确")}),!1):void this.update():(this.setData({isUserMobile:!1}),uni.showToast({icon:"none",position:"bottom",title:this.__("手机号不正确")}),!1))},update:function(){var e=this,t={user_mobile:this.user_intl+this.user_mobile,verify_key:this.user_intl+this.user_mobile,verify_code:this.mobile_code,client_info:e.client_info};e.$.request({url:this.Config.URL.doSmsLogin,data:t,success:function(t,i,n,o){if(200==i){e.$.setStorageSync("uid",t.user_id),e.$.setStorageSync("ukey",t.token);$cookies.set("uid",t.user_id),$cookies.set("ukey",t.token),e.$.request({url:e.Config.URL.userInfo,success:function(t,i,n,o){e.$.showToast({title:e.__("登录成功!"),success:function(){if(e.login(t),t.im&&e.plantformInfo.chat_global&&e.$Socket.connectserver(t.im),e.notice.postNotificationName("RefreshCart",0),2==t.user_state&&e.$.toActive(),e.forcedLoginState)e.$.reLaunch({url:"/pages/index/member"});else{var i=e.$.getStorageSync("pre_route"),n=e.$.getStorageSync("pre_options");if(i){var o="/"+e.$.createUrl(i,n);e.$.gotopage(o)}else e.$.gotopage("/pages/index/member")}}})}})}else e.$.confirm(n)}})},inputphone:function(e){this.setData({user_mobile:e.detail.value}),this.$.isNull(e.detail.value)?this.setData({isUserMobile:!1}):/^1[0123456789]\d{9}$/.test(e.detail.value)?this.setData({isUserMobile:!0}):this.setData({isUserMobile:!1})},inputcode:function(e){this.setData({mobile_code:e.detail.value}),this.$.isNull(e.detail.value)?this.setData({isCode:!1}):this.setData({isCode:!0})},getSmsCode:function(){var e=this;if(!e.$.tel(this.user_mobile,this.user_intl))return this.setData({isUserMobile:!1}),uni.showToast({icon:"none",position:"bottom",title:e.__("手机号不正确")}),!1;if(this.$refs.runCode.$emit("runCode"),setTimeout((function(){e.$refs.runCode.$emit("runCode",0)}),6e4),this.isSend){this.setData({isSend:!1});var t=this.sendTime,i={mobile:this.user_intl+this.user_mobile};e.$.request({url:this.Config.URL.sendMobileVerifyCode,data:i,success:function(i,n,o,a){if(200==n)var r=setInterval((function(){t>0?e.setData({btntext:t--+"s"}):(e.setData({isSend:!0,sendTime:120,btntext:e.__("重新发送")}),clearInterval(r))}),1e3);else e.setData({isSend:!0}),e.$.alert(o),e.$refs.runCode.$emit("runCode",0)}})}},startTimer:function(){var e=this;null==e.cTimer&&(e.countdown--,e.cTimer=setInterval((function(){e.countdown--,0==e.countdown&&e.clearTimer()}),1e3))},clearTimer:function(){clearInterval(this.cTimer),this.cTimer=null,this.countdown=6}})};t.default=d},"4bb7":function(e,t,i){var n=i("fad0");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("967d").default;o("a8e2a27e",n,!0,{sourceMap:!1,shadowMode:!1})},7283:function(e,t,i){"use strict";i.r(t);var n=i("3da2"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},"7d5c":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"register"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"header"},[i("v-uni-image",{attrs:{src:e.logo}})],1),i("v-uni-view",{staticClass:"main"},[i("wInput",{attrs:{type:"text",isShowIntl:!0,placeholder:e.__("请输入手机号码")},on:{intl:function(t){arguments[0]=t=e.$handleEvent(t),e.intlChange.apply(void 0,arguments)}},model:{value:e.user_mobile,callback:function(t){e.user_mobile=t},expression:"user_mobile"}}),i("wInput",{ref:"runCode",attrs:{type:"number",maxlength:"4",placeholder:e.__("请输入验证码"),isShowCode:!0,codeText:e.__("获取验证码")},on:{setCode:function(t){arguments[0]=t=e.$handleEvent(t),e.getSmsCode()}},model:{value:e.mobile_code,callback:function(t){e.mobile_code=t},expression:"mobile_code"}})],1),i("wButton",{staticStyle:{"margin-top":"30rpx"},attrs:{text:e.__("登 录"),rotate:e.isRotate},nativeOn:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.startReg()}}}),e._e(),e._e()],1)],1)},o=[]},fad0:function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */[data-v-ece146f2]:export{theme_bg:#e93323}.content[data-v-ece146f2]{display:flex;flex-direction:column;justify-content:center\r\n  /* margin-top: 128rpx; */}\r\n/* 头部 logo */.header[data-v-ece146f2]{width:%?161?%;height:%?161?%;box-shadow:%?0?% %?0?% %?60?% %?0?% rgba(0,0,0,.1);border-radius:50%;background-color:#e93323;\r\n  /*\r\n  margin-top: 80rpx;\r\n  margin-bottom: 60rpx;\r\n   */margin-top:%?40?%;margin-bottom:%?20?%;margin-left:auto;margin-right:auto}.header uni-image[data-v-ece146f2]{width:%?161?%;height:%?161?%;border-radius:50%}\r\n/* 主体 */.main[data-v-ece146f2]{display:flex;flex-direction:column;padding-left:%?70?%;padding-right:%?70?%}.tips[data-v-ece146f2]{color:#999;font-size:%?28?%;margin-top:%?64?%;margin-left:%?48?%}\r\n/* 登录按钮 */.wbutton[data-v-ece146f2]{margin-top:%?70?%}\r\n/* 其他登录方式 */.other_login[data-v-ece146f2]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin-top:%?80?%;text-align:center}.login_icon[data-v-ece146f2]{border:none;font-size:%?64?%;margin:0 %?40?% 0 %?40?%;color:rgba(0,0,0,.7)}.wechat_color[data-v-ece146f2]{color:#83dc42}.weibo_color[data-v-ece146f2]{color:#f9221d}.github_color[data-v-ece146f2]{color:#24292e}\r\n/* 底部 */.footer[data-v-ece146f2]{display:flex;flex-direction:row;justify-content:center;align-items:center;font-size:%?28?%;margin-top:%?64?%;color:rgba(0,0,0,.7);text-align:center;height:%?40?%;line-height:%?40?%}.footer uni-text[data-v-ece146f2]{font-size:%?24?%;margin-left:%?15?%;margin-right:%?15?%}.cuIcon-item[data-v-ece146f2]{font-size:%?64?%}.cuIcon-item uni-image[data-v-ece146f2]{width:%?64?%;height:%?64?%}\r\n/* common/authorization-info.wxss */.auth-pop[data-v-ece146f2]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;text-align:center;flex-wrap:wrap;z-index:999}.auth-box[data-v-ece146f2]{width:%?600?%;background-color:#fff;border-radius:%?24?%;box-sizing:border-box;padding:%?110?% %?60?%;box-shadow:0 %?10?% %?30?% rgba(0,0,0,.5)}.auth-box uni-image[data-v-ece146f2]{width:%?112?%;height:%?112?%}.auth-box uni-label[data-v-ece146f2]{font-size:%?32?%;color:#333;margin:%?20?% 0;display:inline-block;width:100%}.auth-box uni-text[data-v-ece146f2]{font-size:%?24?%;color:#666}.auth-box uni-button[data-v-ece146f2]{margin-top:%?80?%}.btn-row[data-v-ece146f2]{margin-top:50px;padding:0}.btn-row uni-label[data-v-ece146f2]{font-size:%?32?%;color:#333;margin:%?20?% 0;display:inline;width:100%}.avatar-wrapper[data-v-ece146f2]{padding:0;width:%?112?%!important;height:%?112?%!important;border-radius:%?16?%;margin-top:%?80?%;margin-bottom:%?80?%}.avatar[data-v-ece146f2]{display:block;width:%?112?%;height:%?112?%}.footer[data-v-ece146f2]{font-size:12px}.footer .cuIcon[data-v-ece146f2]{font-size:14px;margin:0}',""]),e.exports=t},fb20:function(e,t,i){"use strict";var n=i("4bb7"),o=i.n(n);o.a}}]);